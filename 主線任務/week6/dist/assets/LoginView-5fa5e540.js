import{_ as h,o as l,c as d,a as u,d as o,h as c,i as m,n as p,g as f,j as _,F as b}from"./index-2e3cb665.js";const{VITE_APP_URL:g}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"202301-vue-shaoyu",BASE_URL:"/VueLiveClass-2022WinterClass_Hexschool/%E4%B8%BB%E7%B7%9A%E4%BB%BB%E5%8B%99/week6/dist/",MODE:"production",DEV:!1,PROD:!0},w={data(){return{userInfo:{username:"",password:""},isLoading:!1,usernameRequir:!1,passwordRequir:!1}},methods:{login(){if(this.usernameRequir=this.userInfo.username==="",this.passwordRequir=this.userInfo.password==="",this.usernameRequir||this.passwordRequir){this.alert("需填入帳號和密碼資料，登入失敗","danger");return}this.isLoading=!0;const n={username:this.userInfo.username,password:this.userInfo.password};this.$http.post(`${g}/admin/signin`,n).then(e=>{if(e.status===200){const{expired:a,token:t}=e.data;document.cookie=`hexToken=${t};expires=${new Date(a)}; path=/`,this.$router.push("/admin/products")}else this.alert("帳號密碼錯誤，登入失敗","danger")}).catch(e=>{console.error("err",e),this.alert("帳號密碼錯誤，登入失敗","danger")}).finally(()=>{this.isLoading=!1})},alert(n,e){const a=document.getElementById("loginResult"),t=document.createElement("div");t.innerHTML=`
        <div class="alert alert-${e} alert-dismissible" role="alert"> 
          ${n} <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      `,a.append(t),setTimeout(()=>{const s=document.querySelector(".alert"),r=new bootstrap.Alert(s);s&&r&&r.close()},3e3)}}},v={class:"form-floating mb-3"},B=["disabled"],E=o("label",{for:"username"},"Email address",-1),L={class:"form-floating"},I=["disabled"],R=o("label",{for:"password"},"Password",-1),q=["disabled"],x={key:0,class:"spinner-border ms-2",role:"status"},y=o("span",{class:"visually-hidden"},"Loading...",-1),P=[y];function V(n,e,a,t,s,r){return l(),d(b,null,[u(" 這是登入畫面 "),o("form",{id:"form",class:"form-signin",onSubmit:e[2]||(e[2]=_((...i)=>r.login&&r.login(...i),["prevent"]))},[o("div",v,[c(o("input",{type:"email",class:p(["form-control",{"is-invalid":s.usernameRequir}]),id:"username",placeholder:"name@example.com","onUpdate:modelValue":e[0]||(e[0]=i=>s.userInfo.username=i),disabled:s.isLoading,required:"",autofocus:""},null,10,B),[[m,s.userInfo.username]]),E]),o("div",L,[c(o("input",{type:"password",class:p(["form-control",{"is-invalid":s.passwordRequir}]),id:"password",placeholder:"Password","onUpdate:modelValue":e[1]||(e[1]=i=>s.userInfo.password=i),disabled:s.isLoading,required:""},null,10,I),[[m,s.userInfo.password]]),R]),o("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit",disabled:s.isLoading},[u(" 登入 "),s.isLoading?(l(),d("div",x,P)):f("",!0)],8,q)],32)],64)}const A=h(w,[["render",V]]);export{A as default};
