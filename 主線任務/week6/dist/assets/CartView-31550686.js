import{_ as C,o as d,c,a as g,d as t,F as _,f as m,g as I,t as r,h as x,v as f}from"./index-2e3cb665.js";const{VITE_APP_URL:u,VITE_APP_PATH:h}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"202301-vue-shaoyu",BASE_URL:"/VueLiveClass-2022WinterClass_Hexschool/%E4%B8%BB%E7%B7%9A%E4%BB%BB%E5%8B%99/week6/dist/",MODE:"production",DEV:!1,PROD:!0},y={data(){return{products:[],productId:"",cart:{},loadingItem:""}},methods:{getCarts(){const e=`${u}/api/${h}/cart`;this.$http.get(e).then(s=>{console.log("購物車",s),this.cart=s.data.data}).catch(s=>{alert(s.response.data.message)})},updateCartItem(e){this.loadingItem=e.id;const s=`${u}/api/${h}/cart/${e.id}`,n={product_id:e.product.id,qty:e.qty};this.$http.put(s,{data:n}).then(i=>{console.log("更新購物車",i),this.getCarts(),this.loadingItem=""}).catch(i=>{alert(i.response.data.message)})},deleteItem(e){this.loadingItem=e.id;const s=`${u}/api/${h}/cart/${e.id}`;this.$http.delete(s).then(n=>{console.log("刪除購物車",n),this.getCarts(),this.loadingItem=""}).catch(n=>{alert(n.response.data.message)})},deleteAllCarts(){const e=`${u}/api/${h}/carts`;this.$http.delete(e).then(s=>{this.getCarts()}).catch(s=>{alert(s.response.data.message)})}},mounted(){this.getCarts()}},B={class:"table align-middle"},b=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),v=["onClick","disabled"],E={key:0,class:"fas fa-spinner fa-pulse"},V={class:"input-group input-group-sm"},P=["onUpdate:modelValue","onChange","disabled"],$=["value"],k={class:"text-end"},A=t("td",{colspan:"3",class:"text-end"},"總計",-1),T={class:"text-end"},D=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),L={class:"text-end text-success"};function U(e,s,n,i,o,p){return d(),c(_,null,[g(" 這是購物車頁面 "),t("table",B,[b,t("tbody",null,[o.cart.carts?(d(!0),c(_,{key:0},m(o.cart.carts,a=>(d(),c("tr",{key:a.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>p.deleteItem(a),disabled:a.id===o.loadingItem},[a.id===o.loadingItem?(d(),c("i",E)):I("",!0),g(" x ")],8,v)]),t("td",null,r(a.product.title)+" ",1),t("td",null,[t("div",V,[x(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":l=>a.qty=l,onChange:l=>p.updateCartItem(a),disabled:a.id===o.loadingItem},[(d(),c(_,null,m(20,l=>t("option",{value:l,key:l+"1234578"},r(l),9,$)),64))],40,P),[[f,a.qty]])])]),t("td",k,r(a.total),1)]))),128)):I("",!0)]),t("tfoot",null,[t("tr",null,[A,t("td",T,r(o.cart.total),1)]),t("tr",null,[D,t("td",L,r(o.cart.final_total),1)])])])],64)}const w=C(y,[["render",U]]);export{w as default};
